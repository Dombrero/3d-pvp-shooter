<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Ego-Shooter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: #000;
        }

        body.game-active {
            cursor: none;
        }

        #gameContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        #crosshair {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            pointer-events: none;
        }

        #crosshair::before,
        #crosshair::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
        }

        #crosshair::before {
            width: 2px;
            height: 20px;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
        }

        #crosshair::after {
            width: 20px;
            height: 2px;
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
        }

        #hud {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        #ammo {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: white;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        #health {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #ff4444;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        #weapon {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 150px;
            pointer-events: none;
            opacity: 0.9;
        }

        #startScreen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 50px;
            border-radius: 15px;
            text-align: center;
            pointer-events: all;
            border: 2px solid #ff4444;
        }

        #startScreen h1 {
            font-size: 56px;
            margin-bottom: 20px;
            color: #ff4444;
            text-shadow: 0 0 10px #ff4444;
        }

        #startScreen p {
            font-size: 20px;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        #startBtn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        #startBtn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #ff4444;
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            pointer-events: all;
            border: 2px solid #ff4444;
        }

        #gameOver h2 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ff4444;
        }

        #gameOver p {
            font-size: 24px;
            margin-bottom: 30px;
        }

        #restartBtn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        #restartBtn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #ff4444;
        }

        #instructions {
            position: absolute;
            bottom: 180px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            text-align: center;
        }

        #multiplayerStatus {
            position: absolute;
            top: 60px;
            left: 20px;
            color: #44ff44;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        #hostBtn:hover, #joinBtn:hover, #soloBtn:hover, #connectBtn:hover, #startGameBtn:hover, #backBtn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="gameContainer"></div>
    
    <div id="ui">
        <div id="crosshair"></div>
        <div id="score">Kills: 0</div>
        <div id="multiplayerStatus" style="display: none;">üü¢ Verbunden</div>
        <div id="health">‚ù§Ô∏è 100</div>
        <div id="hud">Health: 100</div>
        <div id="ammo">Munition: 30/90</div>
        <div id="weapon">
            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg">
                <rect x="80" y="100" width="40" height="50" fill="#333" rx="5"/>
                <rect x="85" y="110" width="30" height="30" fill="#666"/>
                <rect x="90" y="20" width="20" height="80" fill="#444" rx="3"/>
                <circle cx="100" cy="30" r="8" fill="#222"/>
            </svg>
        </div>
        <div id="instructions">
            WASD: Bewegen | Maus: Schauen | Linksklick: Schie√üen | R: Nachladen
        </div>
        
        <div id="startScreen">
            <h1>üéØ 3D EGO-SHOOTER</h1>
            <p>
                Eliminiere alle Feinde!<br>
                Nutze deine Waffe strategisch und √ºberlebe so lange wie m√∂glich.
            </p>
            <div id="multiplayerOptions" style="margin: 20px 0;">
                <button id="hostBtn" style="background: #44ff44; color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 8px; cursor: pointer; margin: 5px; transition: transform 0.2s;">Lobby hosten</button>
                <button id="joinBtn" style="background: #4444ff; color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 8px; cursor: pointer; margin: 5px; transition: transform 0.2s;">Lobby beitreten</button>
                <button id="soloBtn" style="background: #ff4444; color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 8px; cursor: pointer; margin: 5px; transition: transform 0.2s;">Allein spielen</button>
            </div>
            <div id="lobbyScreen" style="display: none;">
                <h2 id="lobbyTitle" style="color: #44ff44; margin-bottom: 20px;">Lobby erstellen...</h2>
                <div id="lobbyIdDisplay" style="font-size: 24px; margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                    <div>Lobby-ID: <span id="lobbyId" style="color: #44ff44; font-weight: bold;"></span></div>
                    <div style="font-size: 14px; margin-top: 10px; color: rgba(255,255,255,0.7);">Teile diese ID mit deinem Freund!</div>
                </div>
                <div id="joinLobbyScreen" style="display: none;">
                    <input type="text" id="lobbyIdInput" placeholder="Lobby-ID eingeben" style="padding: 15px; font-size: 18px; border-radius: 8px; border: 2px solid #4444ff; background: rgba(0,0,0,0.5); color: white; width: 300px; margin: 10px;">
                    <br>
                    <button id="connectBtn" style="background: #4444ff; color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 8px; cursor: pointer; margin: 5px;">Verbinden</button>
                </div>
                <div id="connectionStatus" style="margin: 20px 0; font-size: 18px;"></div>
                <button id="startGameBtn" style="background: #44ff44; color: white; border: none; padding: 15px 40px; font-size: 20px; border-radius: 8px; cursor: pointer; display: none; margin-top: 20px;">Spiel starten</button>
                <button id="backBtn" style="background: #888; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 8px; cursor: pointer; margin-top: 10px;">Zur√ºck</button>
            </div>
        </div>
        
        <div id="gameOver">
            <h2>Game Over!</h2>
            <p>Finale Kills: <span id="finalKills">0</span></p>
            <button id="restartBtn">Nochmal spielen</button>
        </div>
    </div>

    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="game.js"></script>
</body>
</html>
